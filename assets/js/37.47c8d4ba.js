(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{498:function(e,s,t){"use strict";t.r(s);var r=t(30),a=Object(r.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"什么是prometheus"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是prometheus"}},[e._v("#")]),e._v(" 什么是prometheus？")]),e._v(" "),t("p",[t("strong",[e._v("Prometheus是一个开源系统监控和警报工具包")])]),e._v(" "),t("h2",{attrs:{id:"安装并运行prometheus"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装并运行prometheus"}},[e._v("#")]),e._v(" 安装并运行prometheus")]),e._v(" "),t("p",[e._v("一、下载prometheus压缩包")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("https://prometheus.io/download/\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("img",{attrs:{src:"/old-times/png/prometheus/prome_1.png"}}),e._v(" "),t("p",[e._v("二、解压并改名(可不改)")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("使用如下命令\n\ntar -xvf prometheus-2.33.3.linux-amd64.tar.gz\nmv prometheus-2.33.3.linux-amd64 prometheus-2.33.3\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("img",{attrs:{src:"/old-times/png/prometheus/prome_2.png"}}),e._v(" "),t("p",[e._v("进入到prometheus-2.33.3目录中，关键的有prometheus(可执行程序)和prometheus.yml(配置文件)文件。")]),e._v(" "),t("img",{attrs:{src:"/old-times/png/prometheus/prome_3.png"}}),e._v(" "),t("p",[e._v("三、运行")]),e._v(" "),t("p",[e._v("接下来运行prometheus即可。")]),e._v(" "),t("p",[e._v("可以看到，prometheus已经成功运行，可以接收web请求了。\n"),t("img",{attrs:{src:"/old-times/png/prometheus/prome_4.png"}})]),e._v(" "),t("p",[e._v("如果是阿里云，开通防火墙端口9090,就可以在浏览器中访问了。\n"),t("img",{attrs:{src:"/old-times/png/prometheus/prome_5.png"}})]),e._v(" "),t("p",[e._v("后台运行可以使用如下命令。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("nohup ./prometheus > /dev/null 2> /dev/null &\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h2",{attrs:{id:"监控主机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#监控主机"}},[e._v("#")]),e._v(" 监控主机")]),e._v(" "),t("p",[e._v("prometheus已经运行起来了，接下来可以在被监控的主机上安装expoter，\n然后打通被监控主机和prometheus之间的网络，prometheus就可以采集\n到数据了。")]),e._v(" "),t("p",[e._v("仍然是在官网下载node_expoter")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("https://prometheus.io/download/\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("img",{attrs:{src:"/old-times/png/prometheus/prome_6.png"}}),e._v(" "),t("p",[e._v("同样的解压并运行")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("使用如下命令\n\ntar -xvf node_exporter-1.3.1.linux-amd64.tar.gz\nmv node_exporter-1.3.1.linux-amd64 node_exporter-1.3.1\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("运行node_exporter")]),e._v(" "),t("img",{attrs:{src:"/old-times/png/prometheus/prome_7.png"}}),e._v(" "),t("p",[e._v("接下来修改prometheus的prometheus.yml配置文件并重新启动prometheus即可。")]),e._v(" "),t("p",[e._v("添加一个Job,target指定被监控主机的ip和9100端口。\n"),t("img",{attrs:{src:"/old-times/png/prometheus/prome_8.png"}})]),e._v(" "),t("p",[e._v("查看prometheus的ui界面。")]),e._v(" "),t("img",{attrs:{src:"/old-times/png/prometheus/prome_9.png"}}),e._v(" "),t("p",[e._v("可以看到，被监控主机的状态为up，prometheus就可以正常的接收到被监控主机的数据了。")]),e._v(" "),t("img",{attrs:{src:"/old-times/png/prometheus/prome_10.png"}})])}),[],!1,null,null,null);s.default=a.exports}}]);